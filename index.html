<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVX Explorers Club & Expeditions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
        body { font-family: 'Montserrat', sans-serif; background-color: #051c1c; color: white; }
        .card-canvas { display: none; }
    </style>
</head>
<body>
    <header class="p-6 flex justify-between items-center border-b border-gray-700">
        <h1 class="text-xl font-bold text-green-400 tracking-widest">AVX EXPLORERS</h1>
        <select id="langSwitch" class="bg-transparent border border-white text-sm p-1 rounded" onchange="switchLang()">
            <option value="es" class="text-black">ESPAÑOL</option>
            <option value="en" class="text-black">ENGLISH</option>
        </select>
    </header>

    <section class="p-8 max-w-4xl mx-auto text-center">
        <h2 id="expeditionTitle" class="text-3xl font-bold mb-4">GALICIA 2026: PEREGRINOS DEL MAR</h2>
        <p id="slogan" class="italic text-gray-300 mb-6 italic">"Volver a lo básico, para descubrir lo extraordinario"</p>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <a href="https://heyzine.com/flip-book/73a3d87016.html" target="_blank" class="bg-blue-600 p-3 rounded font-bold hover:bg-blue-700">VER BROCHURE</a>
            <a href="https://www.youtube.com/watch?v=WtNhR3ZjVvI" target="_blank" class="bg-red-600 p-3 rounded font-bold hover:bg-red-700">VER VIDEO</a>
            <a href="https://wise.com/pay/me/germanb185" target="_blank" class="bg-green-600 p-3 rounded font-bold hover:bg-green-700">RESERVAR ($540 USD)</a>
        </div>
        <p id="availability" class="text-yellow-400 font-bold">14 CUPOS DISPONIBLES - RESERVA CON EL 40%</p>
    </section>

    <section class="bg-gray-900 p-8 border-t border-gray-800">
        <div class="max-w-4xl mx-auto text-center">
            <h2 id="clubTitle" class="text-2xl font-bold mb-6">MIEMBROS DEL CLUB</h2>
            <div class="mb-4">
                <input type="text" id="memberSearch" placeholder="Ingresa tu ID o Email" class="p-2 rounded text-black w-64">
                <button onclick="checkMember()" class="bg-green-500 p-2 rounded font-bold ml-2">VER TARJETA</button>
            </div>
            <div id="cardContainer" class="mt-6 flex justify-center">
                <canvas id="cardCanvas" width="1000" height="600" class="max-w-full rounded-lg shadow-2xl border border-gray-700"></canvas>
            </div>
            <div class="mt-8">
                <p id="notMember" class="text-sm text-gray-400 mb-4">¿Aún no eres miembro? Únete por $10 USD</p>
                <a href="https://wise.com/pay/me/germanb185" target="_blank" class="text-green-400 underline font-bold">Pagar Anualidad Club</a>
            </div>
        </div>
    </section>

    <script>
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQhLTr6y6uUfZFSRcf8rHz_QA0gv_Yoc6ojmRi0TEubRjXk1mLWIiQO5cz130i7JtscZtcWVBPUhMSq/pub?output=csv';
        const canvas = document.getElementById('cardCanvas');
        const ctx = canvas.getContext('2d');
        const templateImg = new Image();
        templateImg.src = 'TEMPLATE_AVX_CARDCLUB.jpg';

        async function checkMember() {
            const input = document.getElementById('memberSearch').value.trim().toLowerCase();
            const response = await fetch(csvUrl);
            const data = await response.text();
            const rows = data.split('\n').map(row => row.split(','));

            const member = rows.find(r => r[2]?.toLowerCase() === input || r[7]?.toLowerCase() === input);

            if (member && member[6].trim() === 'Activo') {
                drawCard(member);
            } else {
                alert("ID no encontrado o pago pendiente de validación.");
            }
        }

        function drawCard(m) {
            ctx.drawImage(templateImg, 0, 0, 1000, 600);
            ctx.fillStyle = "white";
            ctx.font = "bold 40px Montserrat";
            ctx.fillText(`${m[0]} ${m[1]}`, 600, 150);
            ctx.font = "25px Montserrat";
            ctx.fillText(`ID: ${m[7]}`, 600, 200);
            ctx.fillText(`País: ${m[3]}`, 600, 240);
            ctx.fillStyle = "#fbbf24";
            ctx.fillText(`VENCE: ${m[9]}`, 600, 290);
        }

        window.onload = () => { templateImg.onload = () => ctx.drawImage(templateImg, 0, 0, 1000, 600); };
    </script>
</body>
</html>
